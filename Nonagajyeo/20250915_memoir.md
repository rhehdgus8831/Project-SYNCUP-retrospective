# 2025년 9월 15일 반띵 회고록

---

* **공통 주제**: 지역 기반 공동구매/소분 서비스 플랫폼
* **목표**: 1인 가구와 소규모 가구의 합리적 소비 지원 및 지역 커뮤니티 활성화
* **작업일**: 2025.09.15
* **회고 작성자**: 고동현
* **팀 작업**: 백엔드 작업 진행 상황 공유 및 최종 작업 분담, 기술 이슈 해결 방안 논의
* **개인 작업**: 모임 참가 신청/관리 로직 구현, 마트 데이터 관리 시스템 개선 및 API 구현

---

## 팀 미팅 및 작업

### 1. 백엔드 최종 작업 분담 및 기술적 의사결정

오늘 팀 미팅에서는 각자의 백엔드 작업 진행 상황을 공유하고, 화요일까지 남은 작업을 최종적으로 분담했습니다. 특히 SSO 로그인 후 `providerId`를 `userId`로 변환하는 로직은 프론트엔드와의 연동이 필수적이라 판단하여, 해당 작업은 프론트엔드 구현 시점에 함께 진행하기로 결정했습니다.

또한, 제가 구현할 지도 기능과 관련하여, 수많은 마트 지점을 개별적으로 처리할 때 발생할 수 있는 예외 처리의 복잡성을 줄이고자 **더미 데이터를 분리하여 배포 시 마트 데이터만 유지**하기로 합의했습니다. 이는 개발 효율성과 안정성을 모두 고려한 합리적인 결정이었다고 생각합니다.

---

## 개인 작업

### 1. 모임 참여/관리 로직 및 마트 데이터 시스템 구현

어제 완성한 CRUD 기능을 바탕으로, 오늘은 사용자와 모임 간의 상호작용을 처리하는 복잡한 비즈니스 로직을 구현했습니다.

* **모임 참가 신청 및 관리 기능 구현**: 사용자가 모임에 참가 신청하고, 호스트가 이를 승인/거절하며, 모집을 마감하고, 모임에서 탈퇴하는 등 전체적인 모임 관리 사이클을 `JoinMeetingService`와 `ManageMeetingService`에 구현했습니다.
* **동시성 문제 해결 (비관적 락)**: 여러 사용자가 동시에 마지막 남은 자리에 신청할 경우 발생할 수 있는 데이터 불일치 문제를 해결하기 위해, `MeetingsRepository`의 `findById`에 **비관적 락(`@Lock`)**을 적용하여 데이터의 정합성을 확보했습니다.
* **마트 데이터 관리 시스템 개선**: 개발 편의성을 위해 `data.sql`에 하드코딩 되어있던 마트 데이터를, 배포 시에도 유지되어야 할 영구 데이터로 분리하는 작업을 진행했습니다. `schema.sql` 파일을 생성하여 서울 지역의 전체 창고형 마트 정보를 이전하고, `data.sql`은 순수 개발용 더미 데이터만 관리하도록 역할을 명확히 분리했습니다.
* **마트 목록 조회 API 구현**: 프론트엔드에서 지도에 핀을 표시하는 데 필요한 마트 목록(좌표 포함)을 제공하기 위해 `GET /api/marts` 엔드포인트를 `MartController`와 `MartService`에 새로 구현했습니다.

---

## 느낀점

> 오늘은 단순 CRUD를 넘어, 실제 사용자들의 상호작용에서 발생할 수 있는 다양한 예외 상황(중복 신청, 호스트의 참가 신청 등)을 처리하면서 백엔드 개발의 깊이를 한층 더 느낄 수 있었습니다. 특히 동시성 문제를 고민하고 비관적 락을 적용하는 과정은, 눈에 보이지 않는 위험까지 예측하고 방어하는 개발자의 책임감을 깨닫게 해준 값진 경험이었습니다.
>
> 또한, 팀장님의 조언에 따라 `data.sql`과 `schema.sql`의 역할을 분리한 것은 '개발'과 '운영'을 함께 고려하는 중요한 첫걸음이었습니다. 개발 중에는 더미 데이터로 자유롭게 테스트하고, 배포 시에는 핵심 데이터가 안전하게 유지되는 구조를 직접 설계하며, 안정적인 서비스를 만들기 위한 고민의 폭이 넓어졌습니다. 오늘 구현한 로직들을 바탕으로 내일은 지도 카테고리화 기능을 마무리하여 백엔드 작업을 성공적으로 완료하고 싶습니다.
